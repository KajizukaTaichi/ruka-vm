# Ruka VM
手軽な命令セットアーキテクチャを採用した軽量仮想マシン

## システム構成

 - プログラム領域
 - メモリ領域
 - スタック領域
 - 呼び出しスタック
 - レジスタユニット

レジスタの型は全て64ビット浮動小数点数(f64)です。<br>
メモリは固定512バイトで、8バイト毎にアドレスが振られています。各セルも同じくf64です。

## ISA
|ニーモニック|意味|
|---|---|
|MOV レジスタ, 値|データ転送|
|ADD レジスタ, 値|足し算|
|MUL レジスタ, 値|掛け算|
|NEG レジスタ|符号反転|
|INV レジスタ|逆数|
|EQL レジスタ, 値|等価比較|
|LES レジスタ, 値|大小比較|
|NOR レジスタ, 値|論理ORして否定|
|JMP 条件, アドレス|条件つきジャンプ|
|CAL オペランド|関数呼び出し|
|RET|呼び出し元に戻る|
|LDA レジスタ, アドレス|データ読み込み|
|STA アドレス, 値|データ書き込み|
|PSH 値|スタックに追加|
|POP レジスタ|スタックから取り出し|
|NOP|何もしない|
|HLT|プログラム終了|

## レジスタ
|名前|役割|
|---|---|
|PC|プログラムカウンタ|
|RAX|演算結果の格納|
|RDX|データの格納|
|RCX|繰り返しの条件|
|RBX|アドレス値の格納|
|RSP|スタックポインタ|
